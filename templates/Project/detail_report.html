{% extends 'Project/base_project.html' %}
{% load static %}


{% block cssCustoms2 %}
    <script src="https://cdn.jsdelivr.net/npm/chart.js@latest/dist/Chart.min.js"></script>
    
    <link rel="stylesheet" href="{% static "css/reporte.css" %}">
{% endblock %}


<!-- contenido de la pagina -->
{% block content %}
    <div class="card">
        <div class="card-header h1">
            <div class="row">
                <div class="col">
                    <h1>REPORTE DE PROYECTO</h1>
                </div>
                <div class="col">
                    <div class="row justify-content-end">
                        <a type="button" class="btn-close"
                            aria-label="Close" href="{% url 'list_projects' %}"></a>
                    </div>
                </div>
            </div>
        </div>
        <div class="card-body">
            <h5 class="card-title">Proyecto ABC.</h5>
            <p class="card-text">Informe de los resultados del procesamiento.</p>
            <div class="row">
                <div class="col container_pastel">
                    <div class="pastel_reporte p-2">
                        <h4 class="text-center">Tipos de entradas</h4>
                        <center>
                            <canvas id="grafica"></canvas>
                        </center>
                    </div>
                </div>
                <div class="col">
                    <div class="row p-1">
                        <div class="col">
                            <div class="bg-white detalle_reporte">
                                <div class="row align-items-center">
                                    <div class="col-9">
                                        <p class="p-2">Articulos de archivos</p>
                                    </div>
                                    <div class="col-auto p-2 d-flex justify-content-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                            fill="currentColor"
                                            class="bi bi-file-earmark-text-fill text_warning"
                                            viewBox="0 0 16 16">
                                            <path
                                                d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0M9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1M4.5 9a.5.5 0 0 1 0-1h7a.5.5 0 0 1 0 1zM4 10.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m.5 2.5a.5.5 0 0 1 0-1h4a.5.5 0 0 1 0 1z" />
                                        </svg>
                                    </div>
                                </div>
                                <h1 class="text-center valores">{{ dataReport.count_entries }}</h1>
                            </div>
                        </div>
                        <div class="col">
                            <div class="detalle_reporte bg_primary">
                                <div class="row align-items-center">
                                    <div class="col-9">
                                        <p class="p-2">Artículos procesados</p>
                                    </div>
                                    <div class="col-auto p-2 d-flex justify-content-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                            fill="currentColor" class="bi bi-file-earmark-check-fill"
                                            viewBox="0 0 16 16">
                                            <path
                                                d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0M9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1m1.354 4.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708.708" />
                                        </svg>
                                    </div>
                                </div>
                                <h1 class="text-center valores">{{ dataReport.count_process }}</h1>
                            </div>
                        </div>
                    </div>
                    <div class="row p-1">
                        <div class="col">
                            <div class="bg-white detalle_reporte">
                                <div class="row align-items-center">
                                    <div class="col-9">
                                        <p class="p-2">Articulos Duplicados</p>
                                    </div>
                                    <div class="col-auto p-2 d-flex justify-content-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                            fill="currentColor" class="bi bi-files text_warning"
                                            viewBox="0 0 16 16">
                                            <path
                                                d="M13 0H6a2 2 0 0 0-2 2 2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2 2 2 0 0 0 2-2V2a2 2 0 0 0-2-2m0 13V4a2 2 0 0 0-2-2H5a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1M3 4a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1z" />
                                        </svg>
                                    </div>
                                </div>
                                <h1 class="text-center valores">{{ dataReport.count_duplicated }}</h1>
                            </div>
                        </div>
                        <div class="col">
                            <div class="bg-white detalle_reporte">
                                <div class="row align-items-center">
                                    <div class="col-9">
                                        <p class="p-2">Archivos integrados</p>
                                    </div>
                                    <div class="col-auto p-2 d-flex justify-content-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                            fill="currentColor" class="bi bi-folder-fill text_warning"
                                            viewBox="0 0 16 16">
                                            <path
                                                d="M9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.825a2 2 0 0 1-1.991-1.819l-.637-7a2 2 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3m-8.322.12q.322-.119.684-.12h5.396l-.707-.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981z" />
                                        </svg>
                                    </div>
                                </div>
                                <h1 class="text-center valores">{{ dataReport.count_files }}</h1>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-center align-items-center p-1">
                        <div class="col">
                            <div
                                class="bg-white detalle_reporte d-flex justify-content-center align-items-center">
                                <div class="d-flex justify-content-center align-items-center">
                                    <div class="me-5">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60"
                                            fill="currentColor"
                                            class="bi bi-file-earmark-arrow-down-fill text_primary"
                                            viewBox="0 0 16 16">
                                            <path
                                                d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0M9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1m-1 4v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 11.293V7.5a.5.5 0 0 1 1 0" />
                                        </svg>
                                    </div>
                                    <div class="ms-5">
                                        <a class="btn btn_warning fw-bold col" href="{{ dataReport.url_file }}" download>
                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                                fill="currentColor" class="bi bi-download"
                                                viewBox="0 0 16 16">
                                                <path
                                                    d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5" />
                                                <path
                                                    d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z" />
                                            </svg>
                                            Descargar</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="d-flex justify-content-end pt-2">
                <button class="btn btn_warning col-auto fw-bold" data-bs-toggle="modal"
                    data-bs-target="#guardar_proyecto" disabled>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                        class="bi bi-floppy2-fill" viewBox="0 0 16 16">
                        <path d="M12 2h-2v3h2z" />
                        <path
                            d="M1.5 0A1.5 1.5 0 0 0 0 1.5v13A1.5 1.5 0 0 0 1.5 16h13a1.5 1.5 0 0 0 1.5-1.5V2.914a1.5 1.5 0 0 0-.44-1.06L14.147.439A1.5 1.5 0 0 0 13.086 0zM4 6a1 1 0 0 1-1-1V1h10v4a1 1 0 0 1-1 1zM3 9h10a1 1 0 0 1 1 1v5H2v-5a1 1 0 0 1 1-1" />
                    </svg>
                    Guardar proyecto</button>
            </div>
        </div>
    </div>
{% endblock %}

<!-- Modal's -->

{% block modals %}
    <!-- Guardar Proyecto -->
    <div class="modal fade" id="guardar_proyecto" data-bs-backdrop="static" data-bs-keyboard="false"
        tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header bg_warning text_primary">
                    <h4 class="modal-title w-100 text-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor"
                            class="bi bi-floppy2-fill" viewBox="0 0 16 16">
                            <path d="M12 2h-2v3h2z" />
                            <path
                                d="M1.5 0A1.5 1.5 0 0 0 0 1.5v13A1.5 1.5 0 0 0 1.5 16h13a1.5 1.5 0 0 0 1.5-1.5V2.914a1.5 1.5 0 0 0-.44-1.06L14.147.439A1.5 1.5 0 0 0 13.086 0zM4 6a1 1 0 0 1-1-1V1h10v4a1 1 0 0 1-1 1zM3 9h10a1 1 0 0 1 1 1v5H2v-5a1 1 0 0 1 1-1" />
                        </svg>
                        Guardar Proyecto
                    </h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body fondo pe-5 ps-5">
                    <div class="input-group mb-3">
                        <span class="input-group-text" id="basic-addon1">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                class="bi bi-pencil-fill" viewBox="0 0 16 16">
                                <path
                                    d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.5.5 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11z" />
                            </svg>
                        </span>
                        <input type="text" class="form-control" placeholder="Nombre del proyecto"
                            aria-label="password" aria-describedby="basic-addon1">
                    </div>

                    <div class="input-group mb-3">
                        <span class="input-group-text" id="basic-addon1">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                class="bi bi-card-text" viewBox="0 0 16 16">
                                <path
                                    d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2z" />
                                <path
                                    d="M3 5.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5M3 8a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 8m0 2.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5" />
                            </svg>
                        </span>
                        <textarea type="text" class="form-control textarea" placeholder="Descripción"
                            aria-label="password" aria-describedby="basic-addon1"></textarea>
                    </div>
                </div>
                <div class="modal-footer fondo d-flex justify-content-center">
                    <button type="button" class="btn btn_primary col-auto" data-bs-toggle="modal"
                        data-bs-target="#confirmar">Confirmar</button>
                </div>
            </div>
        </div>
    </div>
{% endblock modals %}

{% block js %}
    <a id="report" type="application/json">
    {{ dataReport|json_script:"report" }}
    </a>
    <script>
        var var_dataReport = JSON.parse(document.getElementById('report').textContent);
    </script>
    
    <script src="{% static "js/menu.js" %}"></script>
    <script src="{% static "js/reporte.js" %}"></script>
{% endblock js %}